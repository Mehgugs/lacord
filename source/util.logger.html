

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta property="og:title" content="lacord.util.logger"/>
<meta property="og:description" content="Source code listing for 'lua/lacord/util/logger.lua'."/>
<meta name="theme-color" content="#e9535f">
            
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width height=device-height initial-scale=1">
        <title>Lacord Docs</title>
        <link rel="stylesheet" href="../source.css">
        <link rel="stylesheet" href="../highlight.css">
        <script src="https://kit.fontawesome.com/e5bb70e554.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
        <script>
            function openNav() {
                document.getElementById("sidebar").className = "fit";
                document.getElementById("content").style.marginLeft  = `${document.getElementById("sidebar").getBoundingClientRect().width}px`;
                document.getElementById("btn").className = "hide";
            }

            function closeNav() {
                document.getElementById("sidebar").className = "zero"
                document.getElementById("content").style.marginLeft = "0"
                document.getElementById("btn").className = "fas fa-bars";
            }
            let state = false;
            function toggleNav() {
                if (state) closeNav(state = false);
                else openNav(state = true);
            }
            window.onresize = () => {
                if (state)
                    document.getElementById("content").style.marginLeft  = `${document.getElementById("sidebar").getBoundingClientRect().width}px`;
            }
            window.onload = () => {
                if (window.location.hash === "#open") {
                    toggleNav();
                } else {

                }
            }
        </script>
    </head>
    <body>
        <div id="sidebar" class="zero">
            <button id="btn2" class="fas fa-times" onclick="toggleNav()"></button>
            <a class="top" href="../index.html">Readme</a>
<div class="sidebar-sep"> Modules </div>
<a href="../pages/api.html">lacord.api</a>
<a href="../pages/cdn.html">lacord.cdn</a>
<a href="../pages/cli.html">lacord.cli</a>
<a href="../pages/const.html">lacord.const</a>
<a href="../pages/outgoing-webhook-server.html">lacord.outgoing-webhook-server</a>
<a href="../pages/shard.html">lacord.shard</a>
<a href="../pages/util.html">lacord.util</a>
<a href="../pages/util.intents.html">lacord.util.intents</a>
<a href="../pages/util.json.html">lacord.util.json</a>
<a href="../pages/util.logger.html">lacord.util.logger</a>
<a href="../pages/util.mutex.html">lacord.util.mutex</a>
<a href="../pages/util.session-limit.html">lacord.util.session-limit</a>
<a href="../pages/util.uint.html">lacord.util.uint</a>
        </div>
        <button id="btn" class="fas fa-bars" onclick="toggleNav()"></button>
        <div id="content">
            <h2><code>lacord.util.logger</code></h2>
            <div class="sourceCode" id="cb1"><pre class="sourceCode lua"><code class="sourceCode lua"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> insert<span class="op">,</span> unpack <span class="op">=</span> <span class="fu">table.insert</span><span class="op">,</span> <span class="fu">table.unpack</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> f <span class="op">=</span> <span class="fu">string.format</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> date<span class="op">,</span> exit <span class="op">=</span> <span class="fu">os.date</span><span class="op">,</span> <span class="fu">os.exit</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> tonumber <span class="op">=</span> <span class="fu">tonumber</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="cn">_</span>stdout<span class="op">,</span> <span class="cn">_</span>stderr <span class="op">=</span> <span class="fu">io.stdout</span><span class="op">,</span> <span class="fu">io.stderr</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> err <span class="op">=</span> <span class="fu">error</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="cn">LACORD_DEBUG</span> <span class="op">=</span> <span class="fu">require</span><span class="st">&quot;lacord.cli&quot;</span><span class="op">.</span>debug</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="cn">_ENV</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">--luacheck: ignore 111</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>stdout <span class="op">=</span> <span class="cn">_</span>stdout</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>stderr <span class="op">=</span> <span class="cn">_</span>stderr</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="cn">_</span>mode <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co">--- An optional lua file object to write output to, must be opened in a write mode.</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>fd <span class="op">=</span> <span class="kw">nil</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function parseHex<span class="op">(</span>c<span class="op">)</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">1</span><span class="op">)</span> <span class="op">==</span> <span class="st">&#39;#&#39;</span> <span class="cf">then</span> c <span class="op">=</span> c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span> <span class="cf">end</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">2</span><span class="op">)</span> <span class="op">==</span> <span class="st">&#39;0x&#39;</span> <span class="cf">then</span> c <span class="op">=</span> c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">3</span><span class="op">)</span> <span class="cf">end</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> len <span class="op">=</span> <span class="op">#</span>c</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="op">(</span><span class="fu">len</span> <span class="op">==</span> <span class="dv">3</span> <span class="kw">or</span> <span class="fu">len</span> <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> <span class="fu">len</span> <span class="op">&gt;</span> <span class="dv">6</span> <span class="kw">and</span> c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">6</span><span class="op">)</span> <span class="kw">or</span> c <span class="op">..</span> <span class="op">(</span><span class="st">&quot;0&quot;</span><span class="op">):</span><span class="fu">rep</span><span class="op">(</span><span class="dv">6</span> <span class="op">-</span> <span class="fu">len</span><span class="op">)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> <span class="fu">len</span> <span class="op">==</span> <span class="dv">3</span> <span class="cf">then</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        c <span class="op">=</span> c<span class="op">:</span><span class="fu">gsub</span><span class="op">(</span><span class="st">&quot;(.)&quot;</span><span class="op">,</span> <span class="st">&quot;%1%1&quot;</span><span class="op">)</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> out <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">,</span><span class="dv">6</span><span class="op">,</span><span class="dv">2</span> <span class="cf">do</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">insert</span><span class="op">(</span>out<span class="op">,</span> <span class="fu">tonumber</span><span class="op">(</span>c<span class="op">:</span><span class="fu">sub</span><span class="op">(</span>i<span class="op">,</span>i<span class="op">+</span><span class="dv">1</span><span class="op">),</span> <span class="dv">16</span><span class="op">))</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">unpack</span><span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">)</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function color_code_to_seq<span class="op">(</span>body<span class="op">)</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> r<span class="op">,</span>g<span class="op">,</span>b <span class="op">=</span> body<span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">&quot;(%d+),(%d+),(%d+)&quot;</span><span class="op">)</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> r <span class="kw">and</span> g <span class="kw">and</span> b <span class="cf">then</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span><span class="st">&#39;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;2;%s;%s;%sm&#39;</span><span class="op">):</span><span class="fu">format</span><span class="op">(</span>r<span class="op">,</span>g<span class="op">,</span>b<span class="op">)</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        r<span class="op">,</span>g<span class="op">,</span>b <span class="op">=</span> parseHex<span class="op">(</span>body<span class="op">)</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> r <span class="kw">and</span> g <span class="kw">and</span> b <span class="kw">and</span> <span class="op">(</span><span class="st">&#39;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;2;%s;%s;%sm&#39;</span><span class="op">):</span><span class="fu">format</span><span class="op">(</span>r<span class="op">,</span>g<span class="op">,</span>b<span class="op">)</span> <span class="kw">or</span> <span class="st">&#39;&#39;</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function highlight_code_to_seq<span class="op">(</span>body<span class="op">)</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> body1<span class="op">,</span> body2 <span class="op">=</span> body<span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">&quot;highlight:([^:]+):([^:]+)&quot;</span><span class="op">)</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> rb<span class="op">,</span>gb<span class="op">,</span>bb <span class="op">=</span> parseHex<span class="op">(</span>body1<span class="op">)</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> rf<span class="op">,</span>gf<span class="op">,</span>bf <span class="op">=</span> parseHex<span class="op">(</span>body2<span class="op">)</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> rb <span class="kw">and</span> gb <span class="kw">and</span> bb <span class="kw">and</span> rf <span class="kw">and</span> gf <span class="kw">and</span> bf <span class="kw">and</span> <span class="op">(</span><span class="st">&#39;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[48;2;%s;%s;%sm</span><span class="sc">\27</span><span class="st">[38;2;%s;%s;%sm&#39;</span><span class="op">):</span><span class="fu">format</span><span class="op">(</span>rb<span class="op">,</span>gb<span class="op">,</span>bb<span class="op">,</span>rf<span class="op">,</span>gf<span class="op">,</span>bf<span class="op">)</span> <span class="kw">or</span> <span class="st">&#39;&#39;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> colors <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>colors<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>    info  <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">warn</span>  <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">error</span> <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>white <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>info_highlight  <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>warn_highlight  <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>error_highlight <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug_highlight <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>colors<span class="op">[</span><span class="dv">24</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    info  <span class="op">=</span> color_code_to_seq<span class="st">&quot;#1a6&quot;</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span><span class="fu">warn</span>  <span class="op">=</span> color_code_to_seq<span class="st">&quot;#ef5&quot;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span><span class="fu">error</span> <span class="op">=</span> color_code_to_seq<span class="st">&quot;#f14&quot;</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>white <span class="op">=</span> color_code_to_seq<span class="st">&quot;#fff&quot;</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>debug <span class="op">=</span> color_code_to_seq<span class="st">&quot;#0ff&quot;</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>info_highlight  <span class="op">=</span> highlight_code_to_seq<span class="st">&quot;highlight:#1a6:#000&quot;</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>warn_highlight  <span class="op">=</span> highlight_code_to_seq<span class="st">&quot;highlight:#ef5:#000&quot;</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>error_highlight <span class="op">=</span> highlight_code_to_seq<span class="st">&quot;highlight:#f14:#000&quot;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>   <span class="op">,</span>debug_highlight <span class="op">=</span> highlight_code_to_seq<span class="st">&quot;highlight:#0ff:#000&quot;</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>colors<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>     info  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[32m&quot;</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">warn</span>  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[33m&quot;</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">error</span> <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[31m&quot;</span></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>white <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;37m&quot;</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;36m&quot;</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>info_highlight  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;92m&quot;</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>warn_highlight  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;93m&quot;</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>error_highlight <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;91m&quot;</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug_highlight <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[1;96m&quot;</span></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>colors<span class="op">[</span><span class="dv">8</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>     info  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;36m&quot;</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">warn</span>  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;220m&quot;</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span><span class="fu">error</span> <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;196m&quot;</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>white <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;231m&quot;</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>info_highlight  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;48m&quot;</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>warn_highlight  <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;11m&quot;</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>error_highlight <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;9m&quot;</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;105m&quot;</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>debug_highlight <span class="op">=</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\27</span><span class="st">[38;5;123m&quot;</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function paint<span class="op">(</span>str<span class="op">)</span></span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">:</span><span class="fu">gsub</span><span class="op">(</span><span class="st">&quot;($([^;]+);)&quot;</span><span class="op">,</span> <span class="kw">function</span><span class="op">(</span><span class="cn">_</span><span class="op">,</span> body<span class="op">)</span></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> body <span class="op">==</span> <span class="st">&#39;reset&#39;</span> <span class="cf">then</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">&#39;</span><span class="sc">\27</span><span class="st">[0m&#39;</span></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> colors<span class="op">[</span><span class="cn">_</span>mode<span class="op">][</span>body<span class="op">]</span> <span class="cf">then</span></span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> colors<span class="op">[</span><span class="cn">_</span>mode<span class="op">][</span>body<span class="op">]</span></span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> <span class="cn">_</span>mode <span class="op">==</span> <span class="dv">24</span> <span class="kw">and</span> body<span class="op">:</span><span class="fu">sub</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span><span class="dv">9</span><span class="op">)</span> <span class="op">==</span> <span class="st">&quot;highlight&quot;</span> <span class="cf">then</span></span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> highlight_code_to_seq<span class="op">(</span>body<span class="op">)</span></span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elseif</span> <span class="cn">_</span>mode <span class="op">==</span> <span class="dv">24</span> <span class="cf">then</span></span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> color_code_to_seq<span class="op">(</span>body<span class="op">)</span></span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span><span class="op">)</span></span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a><span class="cn">_ENV</span><span class="op">.</span>paint <span class="op">=</span> paint</span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function writef<span class="op">(</span>ifd<span class="op">,...)</span></span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> raw <span class="op">=</span> f<span class="op">(...)</span></span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> str<span class="op">,</span>n <span class="op">=</span> paint<span class="op">(</span>raw<span class="op">)</span></span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="cn">_ENV</span><span class="op">.</span>fd <span class="cf">then</span></span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>        <span class="cn">_ENV</span><span class="op">.</span>fd<span class="op">:</span><span class="fu">write</span><span class="op">(</span>raw<span class="op">:</span><span class="fu">gsub</span><span class="op">(</span><span class="st">&quot;$[^;]+;&quot;</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">),</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ifd <span class="cf">then</span></span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>        ifd<span class="op">:</span><span class="fu">write</span><span class="op">(</span>str<span class="op">,</span> n <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> <span class="st">&quot;</span><span class="sc">\27</span><span class="st">[0m</span><span class="sc">\n</span><span class="st">&quot;</span> <span class="kw">or</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-132"><a href="#cb1-132" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs to stdout, and the output file if set, using the INF info channel.</span></span>
<span id="cb1-133"><a href="#cb1-133" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string</span></span>
<span id="cb1-134"><a href="#cb1-134" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-135"><a href="#cb1-135" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> info<span class="op">(...)</span></span>
<span id="cb1-136"><a href="#cb1-136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> writef<span class="op">(</span><span class="cn">_ENV</span><span class="op">.</span>stdout<span class="op">,</span> <span class="st">&quot;$info_highlight; %s INF $info; %s&quot;</span><span class="op">,</span> date<span class="st">&quot;!%c&quot;</span><span class="op">,</span> f<span class="op">(...))</span></span>
<span id="cb1-137"><a href="#cb1-137" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-138"><a href="#cb1-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-139"><a href="#cb1-139" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="cn">LACORD_DEBUG</span> <span class="cf">then</span></span>
<span id="cb1-140"><a href="#cb1-140" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="cn">_ENV</span><span class="op">.</span>debug<span class="op">(...)</span></span>
<span id="cb1-141"><a href="#cb1-141" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> writef<span class="op">(</span><span class="cn">_ENV</span><span class="op">.</span>stdout<span class="op">,</span> <span class="st">&quot;$debug_highlight; %s DBG $debug; %s&quot;</span><span class="op">,</span> date<span class="st">&quot;!%c&quot;</span><span class="op">,</span> f<span class="op">(...))</span></span>
<span id="cb1-142"><a href="#cb1-142" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb1-143"><a href="#cb1-143" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb1-144"><a href="#cb1-144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="cn">_ENV</span><span class="op">.</span>debug<span class="op">()</span></span>
<span id="cb1-145"><a href="#cb1-145" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span>
<span id="cb1-146"><a href="#cb1-146" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-147"><a href="#cb1-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-148"><a href="#cb1-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-149"><a href="#cb1-149" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs to stdout, and the output file if set, using the WRN warning channel.</span></span>
<span id="cb1-150"><a href="#cb1-150" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string</span></span>
<span id="cb1-151"><a href="#cb1-151" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-152"><a href="#cb1-152" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">warn</span><span class="op">(...)</span></span>
<span id="cb1-153"><a href="#cb1-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> writef<span class="op">(</span><span class="cn">_ENV</span><span class="op">.</span>stdout<span class="op">,</span> <span class="st">&quot;$warn_highlight; %s WRN $warn; %s&quot;</span><span class="op">,</span> date<span class="st">&quot;!%c&quot;</span><span class="op">,</span> f<span class="op">(...))</span></span>
<span id="cb1-154"><a href="#cb1-154" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-155"><a href="#cb1-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-156"><a href="#cb1-156" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs to stderr, and the output file if set, using the ERR error channel.</span></span>
<span id="cb1-157"><a href="#cb1-157" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string</span></span>
<span id="cb1-158"><a href="#cb1-158" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-159"><a href="#cb1-159" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">error</span><span class="op">(...)</span></span>
<span id="cb1-160"><a href="#cb1-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> writef<span class="op">(</span><span class="cn">_ENV</span><span class="op">.</span>stderr<span class="op">,</span> <span class="st">&quot;$error_highlight; %s ERR $error; %s&quot;</span><span class="op">,</span> date<span class="st">&quot;!%c&quot;</span><span class="op">,</span> f<span class="op">(...))</span></span>
<span id="cb1-161"><a href="#cb1-161" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-162"><a href="#cb1-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-163"><a href="#cb1-163" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs an error using `logger.error` and then throws a lua error with the same message.</span></span>
<span id="cb1-164"><a href="#cb1-164" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string</span></span>
<span id="cb1-165"><a href="#cb1-165" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-166"><a href="#cb1-166" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> throw<span class="op">(...)</span></span>
<span id="cb1-167"><a href="#cb1-167" aria-hidden="true" tabindex="-1"></a>    <span class="fu">error</span><span class="op">(...)</span></span>
<span id="cb1-168"><a href="#cb1-168" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> err<span class="op">(</span>f<span class="op">(...):</span><span class="fu">gsub</span><span class="op">(</span><span class="st">&quot;$[^;]+;&quot;</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">),</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb1-169"><a href="#cb1-169" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-170"><a href="#cb1-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-171"><a href="#cb1-171" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs an error using `logger.error` and then exits with a non-zero exit code.</span></span>
<span id="cb1-172"><a href="#cb1-172" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string.</span></span>
<span id="cb1-173"><a href="#cb1-173" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-174"><a href="#cb1-174" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> fatal<span class="op">(...)</span></span>
<span id="cb1-175"><a href="#cb1-175" aria-hidden="true" tabindex="-1"></a>    <span class="fu">error</span><span class="op">(...)</span></span>
<span id="cb1-176"><a href="#cb1-176" aria-hidden="true" tabindex="-1"></a>    <span class="fu">error</span><span class="st">&quot;Fatal error: quitting!&quot;</span></span>
<span id="cb1-177"><a href="#cb1-177" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> exit<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="kw">true</span><span class="op">)</span></span>
<span id="cb1-178"><a href="#cb1-178" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-179"><a href="#cb1-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-180"><a href="#cb1-180" aria-hidden="true" tabindex="-1"></a><span class="co">--- Similar to lua&#39;s assert but uses logger.throw when an assertion fails.</span></span>
<span id="cb1-181"><a href="#cb1-181" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="cn">_ENV</span><span class="op">.</span>assert<span class="op">(</span>v<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb1-182"><a href="#cb1-182" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> v <span class="cf">then</span> <span class="cf">return</span> v</span>
<span id="cb1-183"><a href="#cb1-183" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">return</span> <span class="cn">_ENV</span><span class="op">.</span>throw<span class="op">(...)</span></span>
<span id="cb1-184"><a href="#cb1-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb1-185"><a href="#cb1-185" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-186"><a href="#cb1-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-187"><a href="#cb1-187" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> ferror<span class="op">(...)</span> <span class="cf">return</span> err<span class="op">(</span>f<span class="op">(...),</span> <span class="dv">2</span><span class="op">)</span> <span class="kw">end</span></span>
<span id="cb1-188"><a href="#cb1-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-189"><a href="#cb1-189" aria-hidden="true" tabindex="-1"></a><span class="co">--- Logs to stdout, and the output file if set.</span></span>
<span id="cb1-190"><a href="#cb1-190" aria-hidden="true" tabindex="-1"></a><span class="co">-- @string str A format string.</span></span>
<span id="cb1-191"><a href="#cb1-191" aria-hidden="true" tabindex="-1"></a><span class="co">-- @param[opt] ... Values passed into `string.format`.</span></span>
<span id="cb1-192"><a href="#cb1-192" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> printf<span class="op">(...)</span> <span class="cf">return</span> writef<span class="op">(</span><span class="cn">_ENV</span><span class="op">.</span>stdout<span class="op">,</span> <span class="op">...)</span> <span class="kw">end</span></span>
<span id="cb1-193"><a href="#cb1-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-194"><a href="#cb1-194" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> modes <span class="op">=</span> <span class="op">{</span></span>
<span id="cb1-195"><a href="#cb1-195" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-196"><a href="#cb1-196" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-197"><a href="#cb1-197" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="dv">8</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-198"><a href="#cb1-198" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="dv">24</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb1-199"><a href="#cb1-199" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-200"><a href="#cb1-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-201"><a href="#cb1-201" aria-hidden="true" tabindex="-1"></a><span class="co">--- Change color mode for writing to stdout.</span></span>
<span id="cb1-202"><a href="#cb1-202" aria-hidden="true" tabindex="-1"></a><span class="co">-- You can use:</span></span>
<span id="cb1-203"><a href="#cb1-203" aria-hidden="true" tabindex="-1"></a><span class="co">-- - `3` for `3/4 bit color`</span></span>
<span id="cb1-204"><a href="#cb1-204" aria-hidden="true" tabindex="-1"></a><span class="co">-- - `8` for `8 bit color`</span></span>
<span id="cb1-205"><a href="#cb1-205" aria-hidden="true" tabindex="-1"></a><span class="co">-- - `24` for `24 bit true color`.</span></span>
<span id="cb1-206"><a href="#cb1-206" aria-hidden="true" tabindex="-1"></a><span class="co">-- Setting it to `0` disables coloured output.</span></span>
<span id="cb1-207"><a href="#cb1-207" aria-hidden="true" tabindex="-1"></a><span class="co">-- @tparam number m The mode.</span></span>
<span id="cb1-208"><a href="#cb1-208" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> mode<span class="op">(</span>m<span class="op">)</span></span>
<span id="cb1-209"><a href="#cb1-209" aria-hidden="true" tabindex="-1"></a>    m <span class="op">=</span> m <span class="kw">or</span> <span class="dv">0</span></span>
<span id="cb1-210"><a href="#cb1-210" aria-hidden="true" tabindex="-1"></a>    <span class="cn">_</span>mode <span class="op">=</span> modes<span class="op">[</span>m<span class="op">]</span> <span class="kw">and</span> m <span class="kw">or</span> <span class="dv">0</span></span>
<span id="cb1-211"><a href="#cb1-211" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="cn">_</span>mode</span>
<span id="cb1-212"><a href="#cb1-212" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb1-213"><a href="#cb1-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-214"><a href="#cb1-214" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="va">_ENV</span></span></code></pre></div>

        </div>
        <a href="https://github.com/Mehgugs/lacord" class="footer">Lacord 1637789515</a>
    </body>
</html>

